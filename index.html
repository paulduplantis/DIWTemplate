<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIWTemplate</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 20px 0;
            text-align: center;
        }
        main {
            padding: 20px;
        }
        .content-box {
            background-color: #333; /* Black background */
            color: #fff; /* White text */
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 5px;
            height: 150px; /* Adjust height as needed */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .carousel-section {
            margin-bottom: 40px;
            text-align: center;
        }
        .carousel-container {
            display: inline-block;
            text-align: left;
            width: 75%; /* Set the container width to 75% */
            overflow: hidden;
            position: relative;
        }
        .carousel-item {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 15px;
            display: flex;
            align-items: center;
            flex-shrink: 0;
            width: 300px;
            height: 250px; /* Set a fixed height */
            box-sizing: border-box;
            overflow: hidden; /* Ensure content doesn't overflow */
        }
        .carousel-item img {
            max-width: 100px;
            max-height: 100px;
            margin-right: 10px;
        }
        .carousel-item h3 {
            margin: 0;
            font-size: 1.1em;
        }
        .carousel-item p {
            flex-grow: 1;
            margin: 10px 0 0;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .carousel {
            width: 100%;
            max-width: 100%;
            overflow-x: scroll; /* Ensure the scrollbar is visible */
            white-space: nowrap;
            display: flex;
            position: relative;
        }
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
        }
        .carousel-item {
            display: inline-block;
            min-width: 300px;
            box-sizing: border-box;
        }
        .carousel-controls {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            pointer-events: none;
        }
        .carousel-controls button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            pointer-events: all;
            z-index: 1;
        }
        footer {
            background-color: #333;
            color: #fff;
            padding: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>

<header>
    <h1>#keyword for site here</h1>
    <p>Discover Audio, Video, News, and Book or ask ChatGPT</p>
</header>

<main>
    <div class="content-box">
        <a href="https://chatgpt.com" class="chat-link" style="color: #fff; text-decoration: none; font-size: 1.5em;">ChatGPT</a>
    </div>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>News Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-news">
                    <!-- News feed items will be dynamically inserted here -->
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prevBtnNews">&#10094;</button>
                <button id="nextBtnNews">&#10095;</button>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Audio Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-audio">
                    <!-- Audio feed items will be dynamically inserted here -->
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prevBtnAudio">&#10094;</button>
                <button id="nextBtnAudio">&#10095;</button>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Video Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-video">
                    <!-- Video feed items will be dynamically inserted here -->
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prevBtnVideo">&#10094;</button>
                <button id="nextBtnVideo">&#10095;</button>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Book Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-books">
                    <!-- Book feed items will be dynamically inserted here -->
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prevBtnBooks">&#10094;</button>
                <button id="nextBtnBooks">&#10095;</button>
            </div>
        </div>
    </section>
</main>

<footer>
    <p>Contact us at: info@ancientromanhistory.com</p>
    <p>Follow us on:
        <a href="facebook-link">Facebook</a> |
        <a href="twitter-link">Twitter</a> |
        <a href="instagram-link">Instagram</a>
    </p>
</footer>

<script>
    const podcastFeedUrl = 'https://historyofrome.libsyn.com/rss';
    const excludedPodcastTitle = 'The Storm Before The Storm: Chapter 1- The Beasts of Italy';

    async function fetchFeed(feedUrl, containerId, excludedTitle) {
        try {
            const response = await fetch(feedUrl);
            if (!response.ok) {
                console.error('Failed to fetch the RSS feed:', response.status, response.statusText);
                return;
            }
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'application/xml');
            let items = Array.from(xml.querySelectorAll('item'));

            // Reverse the items to show oldest first
            items.reverse();

            const carouselInner = document.getElementById(containerId);

            if (items.length === 0) {
                console.warn('No RSS feed items found.');
                return;
            }

            items.forEach(item => {
                const title = item.querySelector('title').textContent;
                if (title === excludedTitle) {
                    return; // Skip this item
                }
                const link = item.querySelector('link').textContent;
                const description = item.querySelector('description').textContent;
                const imageUrl = item.querySelector('itunes\\:image') ? item.querySelector('itunes\\:image').getAttribute('href') : 'link-to-default-image.jpg';

                const carouselItem = document.createElement('div');
                carouselItem.classList.add('carousel-item');
                carouselItem.innerHTML = `
                    <div class="rss-item">
                        <img src="${imageUrl}" alt="${title}">
                        <div>
                            <h3>${title}</h3>
                            <p>${description}</p>
                            <a href="${link}" target="_blank">Listen Now</a>
                        </div>
                    </div>
                `;
                carouselInner.appendChild(carouselItem);
            });
        } catch (error) {
            console.error('Error fetching or parsing RSS feed:', error);
        }
    }

    function setupCarousel(containerId, prevBtnId, nextBtnId) {
        const carouselInner = document.getElementById(containerId);
        const prevBtn = document.getElementById(prevBtnId);
        const nextBtn = document.getElementById(nextBtnId);
        let index = 0;

        function showSlide(i) {
            const items = document.querySelectorAll(`#${containerId} .carousel-item`);
            if (i >= items.length) index = 0;
            if (i < 0) index = items.length - 1;
            carouselInner.style.transform = `translateX(${-index * 300}px)`;
        }

        prevBtn.addEventListener('click', () => {
            index--;
            showSlide(index);
        });

        nextBtn.addEventListener('click', () => {
            index++;
            showSlide(index);
        });
    }

    const books = [
        {
            title: 'SPQR: A History of Ancient Rome',
            author: 'Mary Beard',
            imageUrl: 'https://m.media-amazon.com/images/I/51DNaiWfllL.jpg',
            link: 'https://www.amazon.com/dp/0670024870'
        },
        {
            title: 'The History of Rome',
            author: 'Livy',
            imageUrl: 'https://m.media-amazon.com/images/I/41NGZX9G4ZL._SX326_BO1,204,203,200_.jpg',
            link: 'https://www.amazon.com/dp/0140448098'
        },
        // Add more book data as needed
    ];

    function loadBooks() {
        const carouselInnerBooks = document.getElementById('carousel-inner-books');
        books.forEach(book => {
            const carouselItem = document.createElement('div');
            carouselItem.classList.add('carousel-item');
            carouselItem.innerHTML = `
                <img src="${book.imageUrl}" alt="${book.title}">
                <div>
                    <h3>${book.title}</h3>
                    <p>${book.author}</p>
                    <a href="${book.link}" target="_blank">View on Amazon</a>
                </div>
            `;
            carouselInnerBooks.appendChild(carouselItem);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        fetchFeed(podcastFeedUrl, 'carousel-inner-news', excludedPodcastTitle);
        fetchFeed(podcastFeedUrl, 'carousel-inner-audio', excludedPodcastTitle);
        fetchFeed(podcastFeedUrl, 'carousel-inner-video', excludedPodcastTitle);
        loadBooks();

        setupCarousel('carousel-inner-news', 'prevBtnNews', 'nextBtnNews');
        setupCarousel('carousel-inner-audio', 'prevBtnAudio', 'nextBtnAudio');
        setupCarousel('carousel-inner-video', 'prevBtnVideo', 'nextBtnVideo');
        setupCarousel('carousel-inner-books', 'prevBtnBooks', 'nextBtnBooks');
    });
</script>

</body>
</html>
