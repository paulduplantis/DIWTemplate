<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIWTemplate</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #fff; /* Change background to white */
            color: #000; /* Change text color to black */
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #fff; /* Change header background to white */
            color: #000; /* Change header text to black */
            padding: 20px 0;
            text-align: center;
        }
        header h1 {
            font-size: 2em; /* Example header font size */
        }
        main {
            padding: 20px;
        }
        .content-box {
            background-color: #fff; /* Change content box background to white */
            color: #000; /* Change content box text to black */
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 5px;
            height: 150px; /* Adjust height as needed */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ddd; /* Add border for better separation */
            flex-direction: column;
        }
        .content-box h2 {
            font-size: 2em; /* Match the header font size */
        }
        .carousel-section {
            margin-bottom: 40px;
            text-align: center;
        }
        .carousel-container {
            display: inline-block;
            text-align: left;
            width: 75%; /* Set the container width to 75% */
            overflow: hidden;
            position: relative;
        }
        .carousel-item {
            background-color: #fff;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            flex-shrink: 0;
            width: 300px;
            height: auto; /* Adjust height as needed */
            box-sizing: border-box;
            overflow: hidden; /* Ensure content doesn't overflow */
        }
        .carousel-item h3 {
            margin: 0;
            font-size: 1.1em;
        }
        .carousel-item p {
            margin: 10px 0 0;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .carousel {
            width: 100%;
            max-width: 100%;
            overflow-x: scroll; /* Ensure the scrollbar is visible */
            white-space: nowrap;
            display: flex;
            position: relative;
        }
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
        }
        .carousel-item {
            display: inline-block;
            min-width: 300px;
            box-sizing: border-box;
        }
        footer {
            background-color: #fff; /* Change footer background to white */
            color: #000; /* Change footer text to black */
            padding: 20px 0;
            text-align: center;
            border-top: 1px solid #ddd; /* Add border for better separation */
        }
        .chatgpt-box {
            width: 100%;
            max-width: 800px;
            margin: 0 auto 20px;
            text-align: center;
        }
        .chatgpt-box img {
            max-width: 100px; /* Adjust as needed */
            height: auto;
            border-radius: 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>#keyword for site here</h1>
    <p>Discover Audio, Video, News, and Book or ask ChatGPT</p>
</header>

<main>
    <div class="content-box">
        <div class="chatgpt-box">
            <h2>Ask ChatGPT:</h2>
            <p style="font-size: 2em;">"What is being done to minimize homelessness?"</p>
            <a href="https://chatgpt.com" class="chat-link" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg" alt="ChatGPT Logo">
            </a>
        </div>
    </div>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>News Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-news">
                    <!-- News feed items will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Audio Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-audio">
                    <!-- Audio feed items will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Video Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-video">
                    <!-- Video feed items will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2>Book Feed</h2>
            <div class="carousel">
                <div class="carousel-inner" id="carousel-inner-books">
                    <!-- Book feed items will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <p>To learn more about Deep Inquiry Websites, contact: info@themergence.io</p>
    <p>To access the GitHub Repository to copy code to build your own Deep Inquiry website, visit <a href="https://github.com/paulduplantis/DIWTemplate" target="_blank">https://github.com/paulduplantis/DIWTemplate</a></p>
    <p>Build and share to create a more resonant connection.</p>
</footer>

<script>
    const podcastFeedUrl = 'https://historyofrome.libsyn.com/rss';
    const excludedPodcastTitle = 'The Storm Before The Storm: Chapter 1- The Beasts of Italy';

    async function fetchFeed(feedUrl, containerId, excludedTitle) {
        try {
            const response = await fetch(feedUrl);
            if (!response.ok) {
                console.error('Failed to fetch the RSS feed:', response.status, response.statusText);
                return;
            }
            const text = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(text, 'application/xml');
            let items = Array.from(xml.querySelectorAll('item'));

            // Reverse the items to show oldest first
            items.reverse();

            const carouselInner = document.getElementById(containerId);

            if (items.length === 0) {
                console.warn('No RSS feed items found.');
                return;
            }

            items.forEach(item => {
                const title = item.querySelector('title').textContent;
                if (title === excludedTitle) {
                    return; // Skip this item
                }
                const link = item.querySelector('link').textContent;
                const description = item.querySelector('description').textContent;

                const carouselItem = document.createElement('div');
                carouselItem.classList.add('carousel-item');
                carouselItem.innerHTML = `
                    <div class="rss-item">
                        <h3>${title}</h3>
                        <p>${description}</p>
                        <a href="${link}" target="_blank">Listen Now</a>
                    </div>
                `;
                carouselInner.appendChild(carouselItem);
            });
        } catch (error) {
            console.error('Error fetching or parsing RSS feed:', error);
        }
    }

    function setupCarousel(containerId) {
        const carouselInner = document.getElementById(containerId);
        let index = 0;

        function showSlide(i) {
            const items = document.querySelectorAll(`#${containerId} .carousel-item`);
            if (i >= items.length) index = 0;
            if (i < 0) index = items.length - 1;
            carouselInner.style.transform = `translateX(${-index * 300}px)`;
        }
    }

    const books = [
        {
            title: 'SPQR: A History of Ancient Rome',
            author: 'Mary Beard',
            imageUrl: 'https://m.media-amazon.com/images/I/51DNaiWfllL.jpg',
            link: 'https://www.amazon.com/dp/0670024870'
        },
        {
            title: 'The History of Rome',
            author: 'Livy',
            imageUrl: 'https://m.media-amazon.com/images/I/41NGZX9G4ZL._SX326_BO1,204,203,200_.jpg',
            link: 'https://www.amazon.com/dp/0140448098'
        },
        // Add more book data as needed
    ];

    function loadBooks() {
        const carouselInnerBooks = document.getElementById('carousel-inner-books');
        books.forEach(book => {
            const carouselItem = document.createElement('div');
            carouselItem.classList.add('carousel-item');
            carouselItem.innerHTML = `
                <div>
                    <h3>${book.title}</h3>
                    <p>${book.author}</p>
                    <a href="${book.link}" target="_blank">View on Amazon</a>
                </div>
            `;
            carouselInnerBooks.appendChild(carouselItem);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        fetchFeed(podcastFeedUrl, 'carousel-inner-news', excludedPodcastTitle);
        fetchFeed(podcastFeedUrl, 'carousel-inner-audio', excludedPodcastTitle);
        fetchFeed(podcastFeedUrl, 'carousel-inner-video', excludedPodcastTitle);
        loadBooks();
    });
</script>

</body>
</html>
